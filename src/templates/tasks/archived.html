{% extends "base.html" %}
{% block title %}Archived Tasks — TaskFlow{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto">

    <!-- Header -->
    <div class="flex items-center justify-between mb-8">
        <div>
            <h1 class="text-2xl font-bold text-slate-100 tracking-tight">Archived Tasks</h1>
            <p class="text-sm mt-0.5" style="color:#64748b;">
                {{ tasks|length }} archived task{{ 's' if tasks|length != 1 else '' }}
            </p>
        </div>
        <a href="/tasks"
           class="inline-flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-150 hover:text-slate-200"
           style="background:rgba(255,255,255,.05); color:#94a3b8; border:1px solid rgba(255,255,255,.08);">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            Active Tasks
        </a>
    </div>

    {% if not tasks %}
    <!-- Empty state -->
    <div class="flex flex-col items-center justify-center py-24 rounded-xl"
         style="background:#1a1d27; border:1px solid rgba(255,255,255,.06);">
        <div class="w-16 h-16 rounded-full flex items-center justify-center mb-4"
             style="background:rgba(100,116,139,.1);">
            <svg class="w-8 h-8" style="color:#475569;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                      d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
            </svg>
        </div>
        <h3 class="text-base font-semibold text-slate-400 mb-1">No archived tasks</h3>
        <p class="text-sm" style="color:#64748b;">Archived tasks will appear here.</p>
    </div>

    {% else %}
    <div class="flex flex-col gap-2">
        {% for task in tasks %}
        <div class="group flex items-start gap-4 px-5 py-4 rounded-xl transition-all duration-150"
             style="background:#1a1d27;
                    border:1px solid rgba(255,255,255,.06);
                    border-left:3px solid #334155;">

            <!-- Status icon -->
            <div class="flex-shrink-0 mt-0.5 w-5 h-5 rounded flex items-center justify-center"
                 style="{% if task.completed %}background:rgba(34,197,94,.15);border:1px solid rgba(34,197,94,.3);{% else %}background:rgba(100,116,139,.1);border:1px solid #334155;{% endif %}">
                {% if task.completed %}
                <svg class="w-3 h-3" style="color:#22c55e;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                </svg>
                {% endif %}
            </div>

            <!-- Content -->
            <div class="flex-1 min-w-0">
                <div class="flex items-start justify-between gap-3">
                    <div class="min-w-0">
                        <span class="text-sm font-medium block truncate opacity-60
                                     {% if task.completed %}line-through{% endif %}"
                              style="color:#94a3b8;">
                            {{ task.title }}
                        </span>
                        {% if task.body %}
                        <p class="text-xs mt-0.5 truncate opacity-50" style="color:#64748b;">
                            {{ task.body[:100] }}{% if task.body|length > 100 %}…{% endif %}
                        </p>
                        {% endif %}
                        <span class="inline-flex items-center gap-1 mt-1.5 text-xs"
                              style="color:#475569;">
                            Archived {{ task.updated_at.strftime('%b %d, %Y') if task.updated_at else '' }}
                        </span>
                    </div>

                    <!-- Restore action (visible on hover) -->
                    <div class="flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity duration-150">
                        <form method="POST" action="/tasks/{{ task.id }}/unarchive">
                            <button type="submit"
                                    class="inline-flex items-center gap-1.5 px-3 py-1.5 rounded text-xs font-medium transition-all duration-150 hover:opacity-90"
                                    style="background:rgba(99,102,241,.12); color:#a5b4fc; border:1px solid rgba(99,102,241,.25);">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                          d="M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"/>
                                </svg>
                                Restore
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

</div>
{% endblock %}
